<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Touch React | Joey Blog</title>
<meta name=keywords content="React"><meta name=description content="
æ–‡ç« åŸºäº React 18.3 ç‰ˆæœ¬
creatElement
è€³ç†Ÿèƒ½è¯¦ çš„ JSXï¼Œå®ƒæ˜¯å¦‚ä½•å˜æˆæˆ‘ä»¬ç†Ÿæ‚‰çš„ DOM çš„ï¼Ÿè¿™å½’åŠŸäº React çš„creatElementï¼Œå­¦è¿‡ Vue çš„éƒ½çŸ¥é“ï¼Œå®ƒä»¬è¿åå­—éƒ½ä¸€æ ·ï¼Œè¿™ä¸ªå‡½æ•°ä¸»è¦çš„ä½œç”¨éƒ½æ˜¯è¿‘ä¹ç›¸åŒå…è®¸ä½ åœ¨HTMLä¸­ç¼–å†™ JavaScriptï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ React æ˜¯é™æ€çš„ domï¼ŒVue æ˜¯åŠ¨æ€çš„ domï¼Œä»ç¼–å†™çš„å½¢å¼å’Œè¯­æ³•ä¸Šå¯ä»¥çœ‹å‡ºï¼ŒReact æ›´åå‘äºæ‰‹åŠ¨æŒ¡ï¼ŒVue åˆ™æ˜¯è‡ªåŠ¨æŒ¡ã€‚å›åˆ°æ­£é¢˜ï¼ŒReact çš„ createElement æ›´åå‘äº JavaScript çš„ç¼–å†™ï¼Œå› ä¸º children å°±åœ¨ prop é‡Œé¢ï¼Œè€Œ Vue æ˜¯åŠ äº†ä¸€å±‚æ’æ§½ã€‚React ä¸­ createElement é‡è¦å‚æ•°å°±æ˜¯typeå’Œpropï¼Œæ¥è§¦è¿‡ Vue çš„å°±å¾ˆç†Ÿæ‚‰ï¼Œå…¶å®å°±æ˜¯æ—¥å¸¸ Vue æ¨¡ç‰ˆä½¿ç”¨çš„æ ‡ç­¾å’Œ propsï¼Œæ‰€ä»¥ React çš„ createElement çœ‹èµ·æ¥åƒï¼š
const element = React.createElement(
 type:&#34;h1&#34;,
 prop:{
  title: &#34;foo&#34;,
  },
  children: &#34;Hello&#34;
)
æ¥ç€é€šè¿‡ React å®ƒä¼šå˜æˆè¿™æ ·çš„ DOMï¼š
<h1 title=&#34;foo&#34;>Hello</h1>
createElement ç”Ÿæˆä¹‹åè¿”å›ï¼šè¿”å›çš„ç»“æ„ä½“å«åšReact å…ƒç´ å¯¹è±¡ï¼Œå®ƒç”¨äºæè¿° UI ç»“æ„ï¼Œè¿™ä¸ªäº§ç‰©æœ€ç»ˆä¼šå˜æˆä¸€ä¸ªfilberã€‚
{
  type: 'div',
  props: {
    className: 'container',
    children: [
      {
        type: 'h1',
        props: {
          children: 'Hello, World!'
        }
      },
      {
        type: 'p',
        props: {
          children: 'This is a paragraph.'
        }
      }
    ]
  }
}
createElement è§£æçš„å†…å®¹ä»ä½•è€Œæ¥ï¼Ÿ
è¿™é‡Œæ¶‰åŠåˆ°éå¸¸å¤æ‚çš„å†…å®¹ï¼šBabel çš„ç¼–è¯‘ï¼Œbabel ä¼šå¸®åŠ©ä½ æŠŠ JSX æ–‡ä»¶ç¼–è¯‘æˆä¸ºå¯ä¾›è§£æçš„ JavaScript ä»£ç ï¼ŒJSX å…¶å®æ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œå®ƒå…è®¸åœ¨ JavaScript ç¯å¢ƒä¸­ä½¿ç”¨ç¼–å†™ HTML ç»“æ„çš„æ–‡ä»¶ã€‚"><meta name=author content="Joey"><link rel=canonical href=https://joeyma-zh.github.io/posts/touch-react/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as=style><link rel=icon href=https://joeyma-zh.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://joeyma-zh.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://joeyma-zh.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://joeyma-zh.github.io/apple-touch-icon.png><link rel=mask-icon href=https://joeyma-zh.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://joeyma-zh.github.io/posts/touch-react/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://joeyma-zh.github.io/posts/touch-react/"><meta property="og:site_name" content="Joey Blog"><meta property="og:title" content="Touch React"><meta property="og:description" content=" æ–‡ç« åŸºäº React 18.3 ç‰ˆæœ¬
creatElement è€³ç†Ÿèƒ½è¯¦ çš„ JSXï¼Œå®ƒæ˜¯å¦‚ä½•å˜æˆæˆ‘ä»¬ç†Ÿæ‚‰çš„ DOM çš„ï¼Ÿè¿™å½’åŠŸäº React çš„creatElementï¼Œå­¦è¿‡ Vue çš„éƒ½çŸ¥é“ï¼Œå®ƒä»¬è¿åå­—éƒ½ä¸€æ ·ï¼Œè¿™ä¸ªå‡½æ•°ä¸»è¦çš„ä½œç”¨éƒ½æ˜¯è¿‘ä¹ç›¸åŒå…è®¸ä½ åœ¨HTMLä¸­ç¼–å†™ JavaScriptï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ React æ˜¯é™æ€çš„ domï¼ŒVue æ˜¯åŠ¨æ€çš„ domï¼Œä»ç¼–å†™çš„å½¢å¼å’Œè¯­æ³•ä¸Šå¯ä»¥çœ‹å‡ºï¼ŒReact æ›´åå‘äºæ‰‹åŠ¨æŒ¡ï¼ŒVue åˆ™æ˜¯è‡ªåŠ¨æŒ¡ã€‚å›åˆ°æ­£é¢˜ï¼ŒReact çš„ createElement æ›´åå‘äº JavaScript çš„ç¼–å†™ï¼Œå› ä¸º children å°±åœ¨ prop é‡Œé¢ï¼Œè€Œ Vue æ˜¯åŠ äº†ä¸€å±‚æ’æ§½ã€‚React ä¸­ createElement é‡è¦å‚æ•°å°±æ˜¯typeå’Œpropï¼Œæ¥è§¦è¿‡ Vue çš„å°±å¾ˆç†Ÿæ‚‰ï¼Œå…¶å®å°±æ˜¯æ—¥å¸¸ Vue æ¨¡ç‰ˆä½¿ç”¨çš„æ ‡ç­¾å’Œ propsï¼Œæ‰€ä»¥ React çš„ createElement çœ‹èµ·æ¥åƒï¼š
const element = React.createElement( type:&#34;h1&#34;, prop:{ title: &#34;foo&#34;, }, children: &#34;Hello&#34; ) æ¥ç€é€šè¿‡ React å®ƒä¼šå˜æˆè¿™æ ·çš„ DOMï¼š
<h1 title=&#34;foo&#34;>Hello</h1> createElement ç”Ÿæˆä¹‹åè¿”å›ï¼šè¿”å›çš„ç»“æ„ä½“å«åšReact å…ƒç´ å¯¹è±¡ï¼Œå®ƒç”¨äºæè¿° UI ç»“æ„ï¼Œè¿™ä¸ªäº§ç‰©æœ€ç»ˆä¼šå˜æˆä¸€ä¸ªfilberã€‚
{ type: 'div', props: { className: 'container', children: [ { type: 'h1', props: { children: 'Hello, World!' } }, { type: 'p', props: { children: 'This is a paragraph.' } } ] } } createElement è§£æçš„å†…å®¹ä»ä½•è€Œæ¥ï¼Ÿ è¿™é‡Œæ¶‰åŠåˆ°éå¸¸å¤æ‚çš„å†…å®¹ï¼šBabel çš„ç¼–è¯‘ï¼Œbabel ä¼šå¸®åŠ©ä½ æŠŠ JSX æ–‡ä»¶ç¼–è¯‘æˆä¸ºå¯ä¾›è§£æçš„ JavaScript ä»£ç ï¼ŒJSX å…¶å®æ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œå®ƒå…è®¸åœ¨ JavaScript ç¯å¢ƒä¸­ä½¿ç”¨ç¼–å†™ HTML ç»“æ„çš„æ–‡ä»¶ã€‚"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-02-12T14:03:41+08:00"><meta property="article:modified_time" content="2025-02-12T14:03:41+08:00"><meta property="article:tag" content="React"><meta property="og:image" content="https://joeyma-zh.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://joeyma-zh.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Touch React"><meta name=twitter:description content="
æ–‡ç« åŸºäº React 18.3 ç‰ˆæœ¬
creatElement
è€³ç†Ÿèƒ½è¯¦ çš„ JSXï¼Œå®ƒæ˜¯å¦‚ä½•å˜æˆæˆ‘ä»¬ç†Ÿæ‚‰çš„ DOM çš„ï¼Ÿè¿™å½’åŠŸäº React çš„creatElementï¼Œå­¦è¿‡ Vue çš„éƒ½çŸ¥é“ï¼Œå®ƒä»¬è¿åå­—éƒ½ä¸€æ ·ï¼Œè¿™ä¸ªå‡½æ•°ä¸»è¦çš„ä½œç”¨éƒ½æ˜¯è¿‘ä¹ç›¸åŒå…è®¸ä½ åœ¨HTMLä¸­ç¼–å†™ JavaScriptï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ React æ˜¯é™æ€çš„ domï¼ŒVue æ˜¯åŠ¨æ€çš„ domï¼Œä»ç¼–å†™çš„å½¢å¼å’Œè¯­æ³•ä¸Šå¯ä»¥çœ‹å‡ºï¼ŒReact æ›´åå‘äºæ‰‹åŠ¨æŒ¡ï¼ŒVue åˆ™æ˜¯è‡ªåŠ¨æŒ¡ã€‚å›åˆ°æ­£é¢˜ï¼ŒReact çš„ createElement æ›´åå‘äº JavaScript çš„ç¼–å†™ï¼Œå› ä¸º children å°±åœ¨ prop é‡Œé¢ï¼Œè€Œ Vue æ˜¯åŠ äº†ä¸€å±‚æ’æ§½ã€‚React ä¸­ createElement é‡è¦å‚æ•°å°±æ˜¯typeå’Œpropï¼Œæ¥è§¦è¿‡ Vue çš„å°±å¾ˆç†Ÿæ‚‰ï¼Œå…¶å®å°±æ˜¯æ—¥å¸¸ Vue æ¨¡ç‰ˆä½¿ç”¨çš„æ ‡ç­¾å’Œ propsï¼Œæ‰€ä»¥ React çš„ createElement çœ‹èµ·æ¥åƒï¼š
const element = React.createElement(
 type:&#34;h1&#34;,
 prop:{
  title: &#34;foo&#34;,
  },
  children: &#34;Hello&#34;
)
æ¥ç€é€šè¿‡ React å®ƒä¼šå˜æˆè¿™æ ·çš„ DOMï¼š
<h1 title=&#34;foo&#34;>Hello</h1>
createElement ç”Ÿæˆä¹‹åè¿”å›ï¼šè¿”å›çš„ç»“æ„ä½“å«åšReact å…ƒç´ å¯¹è±¡ï¼Œå®ƒç”¨äºæè¿° UI ç»“æ„ï¼Œè¿™ä¸ªäº§ç‰©æœ€ç»ˆä¼šå˜æˆä¸€ä¸ªfilberã€‚
{
  type: 'div',
  props: {
    className: 'container',
    children: [
      {
        type: 'h1',
        props: {
          children: 'Hello, World!'
        }
      },
      {
        type: 'p',
        props: {
          children: 'This is a paragraph.'
        }
      }
    ]
  }
}
createElement è§£æçš„å†…å®¹ä»ä½•è€Œæ¥ï¼Ÿ
è¿™é‡Œæ¶‰åŠåˆ°éå¸¸å¤æ‚çš„å†…å®¹ï¼šBabel çš„ç¼–è¯‘ï¼Œbabel ä¼šå¸®åŠ©ä½ æŠŠ JSX æ–‡ä»¶ç¼–è¯‘æˆä¸ºå¯ä¾›è§£æçš„ JavaScript ä»£ç ï¼ŒJSX å…¶å®æ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œå®ƒå…è®¸åœ¨ JavaScript ç¯å¢ƒä¸­ä½¿ç”¨ç¼–å†™ HTML ç»“æ„çš„æ–‡ä»¶ã€‚"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://joeyma-zh.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Touch React","item":"https://joeyma-zh.github.io/posts/touch-react/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Touch React","name":"Touch React","description":" æ–‡ç« åŸºäº React 18.3 ç‰ˆæœ¬\ncreatElement è€³ç†Ÿèƒ½è¯¦ çš„ JSXï¼Œå®ƒæ˜¯å¦‚ä½•å˜æˆæˆ‘ä»¬ç†Ÿæ‚‰çš„ DOM çš„ï¼Ÿè¿™å½’åŠŸäº React çš„creatElementï¼Œå­¦è¿‡ Vue çš„éƒ½çŸ¥é“ï¼Œå®ƒä»¬è¿åå­—éƒ½ä¸€æ ·ï¼Œè¿™ä¸ªå‡½æ•°ä¸»è¦çš„ä½œç”¨éƒ½æ˜¯è¿‘ä¹ç›¸åŒå…è®¸ä½ åœ¨HTMLä¸­ç¼–å†™ JavaScriptï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ React æ˜¯é™æ€çš„ domï¼ŒVue æ˜¯åŠ¨æ€çš„ domï¼Œä»ç¼–å†™çš„å½¢å¼å’Œè¯­æ³•ä¸Šå¯ä»¥çœ‹å‡ºï¼ŒReact æ›´åå‘äºæ‰‹åŠ¨æŒ¡ï¼ŒVue åˆ™æ˜¯è‡ªåŠ¨æŒ¡ã€‚å›åˆ°æ­£é¢˜ï¼ŒReact çš„ createElement æ›´åå‘äº JavaScript çš„ç¼–å†™ï¼Œå› ä¸º children å°±åœ¨ prop é‡Œé¢ï¼Œè€Œ Vue æ˜¯åŠ äº†ä¸€å±‚æ’æ§½ã€‚React ä¸­ createElement é‡è¦å‚æ•°å°±æ˜¯typeå’Œpropï¼Œæ¥è§¦è¿‡ Vue çš„å°±å¾ˆç†Ÿæ‚‰ï¼Œå…¶å®å°±æ˜¯æ—¥å¸¸ Vue æ¨¡ç‰ˆä½¿ç”¨çš„æ ‡ç­¾å’Œ propsï¼Œæ‰€ä»¥ React çš„ createElement çœ‹èµ·æ¥åƒï¼š\nconst element = React.createElement( type:\u0026#34;h1\u0026#34;, prop:{ title: \u0026#34;foo\u0026#34;, }, children: \u0026#34;Hello\u0026#34; ) æ¥ç€é€šè¿‡ React å®ƒä¼šå˜æˆè¿™æ ·çš„ DOMï¼š\n\u0026lt;h1 title=\u0026#34;foo\u0026#34;\u0026gt;Hello\u0026lt;/h1\u0026gt; createElement ç”Ÿæˆä¹‹åè¿”å›ï¼šè¿”å›çš„ç»“æ„ä½“å«åšReact å…ƒç´ å¯¹è±¡ï¼Œå®ƒç”¨äºæè¿° UI ç»“æ„ï¼Œè¿™ä¸ªäº§ç‰©æœ€ç»ˆä¼šå˜æˆä¸€ä¸ªfilberã€‚\n{ type: \u0026#39;div\u0026#39;, props: { className: \u0026#39;container\u0026#39;, children: [ { type: \u0026#39;h1\u0026#39;, props: { children: \u0026#39;Hello, World!\u0026#39; } }, { type: \u0026#39;p\u0026#39;, props: { children: \u0026#39;This is a paragraph.\u0026#39; } } ] } } createElement è§£æçš„å†…å®¹ä»ä½•è€Œæ¥ï¼Ÿ è¿™é‡Œæ¶‰åŠåˆ°éå¸¸å¤æ‚çš„å†…å®¹ï¼šBabel çš„ç¼–è¯‘ï¼Œbabel ä¼šå¸®åŠ©ä½ æŠŠ JSX æ–‡ä»¶ç¼–è¯‘æˆä¸ºå¯ä¾›è§£æçš„ JavaScript ä»£ç ï¼ŒJSX å…¶å®æ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œå®ƒå…è®¸åœ¨ JavaScript ç¯å¢ƒä¸­ä½¿ç”¨ç¼–å†™ HTML ç»“æ„çš„æ–‡ä»¶ã€‚\n","keywords":["React"],"articleBody":" æ–‡ç« åŸºäº React 18.3 ç‰ˆæœ¬\ncreatElement è€³ç†Ÿèƒ½è¯¦ çš„ JSXï¼Œå®ƒæ˜¯å¦‚ä½•å˜æˆæˆ‘ä»¬ç†Ÿæ‚‰çš„ DOM çš„ï¼Ÿè¿™å½’åŠŸäº React çš„creatElementï¼Œå­¦è¿‡ Vue çš„éƒ½çŸ¥é“ï¼Œå®ƒä»¬è¿åå­—éƒ½ä¸€æ ·ï¼Œè¿™ä¸ªå‡½æ•°ä¸»è¦çš„ä½œç”¨éƒ½æ˜¯è¿‘ä¹ç›¸åŒå…è®¸ä½ åœ¨HTMLä¸­ç¼–å†™ JavaScriptï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ React æ˜¯é™æ€çš„ domï¼ŒVue æ˜¯åŠ¨æ€çš„ domï¼Œä»ç¼–å†™çš„å½¢å¼å’Œè¯­æ³•ä¸Šå¯ä»¥çœ‹å‡ºï¼ŒReact æ›´åå‘äºæ‰‹åŠ¨æŒ¡ï¼ŒVue åˆ™æ˜¯è‡ªåŠ¨æŒ¡ã€‚å›åˆ°æ­£é¢˜ï¼ŒReact çš„ createElement æ›´åå‘äº JavaScript çš„ç¼–å†™ï¼Œå› ä¸º children å°±åœ¨ prop é‡Œé¢ï¼Œè€Œ Vue æ˜¯åŠ äº†ä¸€å±‚æ’æ§½ã€‚React ä¸­ createElement é‡è¦å‚æ•°å°±æ˜¯typeå’Œpropï¼Œæ¥è§¦è¿‡ Vue çš„å°±å¾ˆç†Ÿæ‚‰ï¼Œå…¶å®å°±æ˜¯æ—¥å¸¸ Vue æ¨¡ç‰ˆä½¿ç”¨çš„æ ‡ç­¾å’Œ propsï¼Œæ‰€ä»¥ React çš„ createElement çœ‹èµ·æ¥åƒï¼š\nconst element = React.createElement( type:\"h1\", prop:{ title: \"foo\", }, children: \"Hello\" ) æ¥ç€é€šè¿‡ React å®ƒä¼šå˜æˆè¿™æ ·çš„ DOMï¼š\n\u003ch1 title=\"foo\"\u003eHello\u003c/h1\u003e createElement ç”Ÿæˆä¹‹åè¿”å›ï¼šè¿”å›çš„ç»“æ„ä½“å«åšReact å…ƒç´ å¯¹è±¡ï¼Œå®ƒç”¨äºæè¿° UI ç»“æ„ï¼Œè¿™ä¸ªäº§ç‰©æœ€ç»ˆä¼šå˜æˆä¸€ä¸ªfilberã€‚\n{ type: 'div', props: { className: 'container', children: [ { type: 'h1', props: { children: 'Hello, World!' } }, { type: 'p', props: { children: 'This is a paragraph.' } } ] } } createElement è§£æçš„å†…å®¹ä»ä½•è€Œæ¥ï¼Ÿ è¿™é‡Œæ¶‰åŠåˆ°éå¸¸å¤æ‚çš„å†…å®¹ï¼šBabel çš„ç¼–è¯‘ï¼Œbabel ä¼šå¸®åŠ©ä½ æŠŠ JSX æ–‡ä»¶ç¼–è¯‘æˆä¸ºå¯ä¾›è§£æçš„ JavaScript ä»£ç ï¼ŒJSX å…¶å®æ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œå®ƒå…è®¸åœ¨ JavaScript ç¯å¢ƒä¸­ä½¿ç”¨ç¼–å†™ HTML ç»“æ„çš„æ–‡ä»¶ã€‚\nå®é™…ä¸Šï¼Œjsxæ˜¯é€šè¿‡babelæ’ä»¶@babel/plugin-transform-react-jsxè¿›è¡Œç¼–è¯‘çš„\nrender é€šè¿‡creatElement\nåœ¨ React å†…éƒ¨ï¼Œå®é™…ä¸Šæ˜¯è¿™æ ·çš„ä¼ªä»£ç :æ‰¾åˆ°æ ¹å®¹å™¨ï¼Œå¹¶æ ¹æ® dom ç±»å‹åˆ›å»ºå®¹å™¨ï¼Œç„¶åèµ‹å€¼ä¸Š propsï¼Œä¹‹åå°±æ˜¯å¤„ç† children èŠ‚ç‚¹ï¼Œå¦‚æœ children æ˜¯æ–‡æœ¬ï¼Œé‚£ç›´æ¥åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹ï¼Œå¦‚æœå­å…ƒç´ æ˜¯æ•°ç»„ï¼Œé€’å½’å¤„ç†æ¯ä¸ªå­å…ƒç´ ã€‚\nfunction render(element, container) { // åˆ›å»º DOM å…ƒç´  const node = document.createElement(element.type); // è®¾ç½®å±æ€§ for (let propName in element.props) { if (propName !== \"children\") { node[propName] = element.props[propName]; } } // å¤„ç†å­å…ƒç´  const children = element.props.children; if (typeof children === \"string\") { // å¦‚æœå­å…ƒç´ æ˜¯æ–‡æœ¬ï¼Œç›´æ¥åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹ const textNode = document.createTextNode(children); node.appendChild(textNode); } else if (Array.isArray(children)) { // å¦‚æœå­å…ƒç´ æ˜¯æ•°ç»„ï¼Œé€’å½’å¤„ç†æ¯ä¸ªå­å…ƒç´  children.forEach((child) =\u003e render(child, node)); } // æŒ‚è½½åˆ°å®¹å™¨ container.appendChild(node); } // ä½¿ç”¨ç¤ºä¾‹ const element = { type: \"div\", props: { className: \"container\", children: \"Hello, World!\", }, }; const container = document.getElementById(\"root\"); render(element, container); Concurrent Modeï¼ˆå¹¶å‘æ¨¡å¼ï¼‰ åœ¨æµè§ˆå™¨åˆšå¼€å§‹æ¸²æŸ“çš„æ—¶å€™ï¼Œä¼šé˜»å¡ä¸»çº¿ç¨‹ç›´åˆ°å…ƒç´ æ ‘æ¸²æŸ“å®Œæˆï¼Œé€šå¸¸å¦‚æœå…ƒç´ æ ‘æ¯”è¾ƒå¤§ä¼šå ç”¨å¤§é‡çš„æ—¶é—´ï¼Œå¯¼è‡´éƒ¨åˆ†ä¼˜å…ˆçº§æ“ä½œï¼ˆç”¨æˆ·è¾“å…¥ ã€åŠ¨ç”»ï¼‰ç­‰é«˜çº§è°ƒåº¦ä¼šè¢«é˜»å¡ï¼Œæ‰€ä»¥ React å›¢é˜Ÿä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°†æ¯ä¸ªå°ä»»åŠ¡åˆ†ä¸ºå•å…ƒï¼Œå½“æµè§ˆå™¨çš„æ—¶å€™éœ€è¦æ‰§è¡Œç”¨æˆ·è¾“å…¥æ—¶ï¼Œä¼šä¸­æ–­æ¸²æŸ“è¿›åœºï¼Œç­‰è°ƒåº¦å®Œæˆå„å•å…ƒç»§ç»­å·¥ä½œã€‚æˆ‘ä»¬ä½¿ç”¨requestIdleCallbackæ„å»ºä¸€ä¸ªé€’å½’ï¼Œå½“æµè§ˆå™¨æœ‰ç©ºé—²æ—¶æ‰§è¡Œå›è°ƒå‡½æ•°(ç†è§£å¦‚åŒ setTimeout);\nperformUnitOfWork å¤„ç†æ¯ä¸ª Fiber èŠ‚ç‚¹çš„æ“ä½œï¼Œå¤„ç†å®Œæˆåè¿”å›ä¸‹ä¸€ä¸ªè¦å¤„ç†çš„å·¥ä½œå•å…ƒ\nè¿™é‡Œçš„ Fiber èŠ‚ç‚¹æ˜¯ React å®ç°è™šæ‹Ÿ DOM èŠ‚ç‚¹çš„å½¢å¼\nç”± Filber èŠ‚ç‚¹æ„å»ºçš„æ ‘ç§°ä¸º Filber æ ‘ã€‚\nå‚è€ƒæ–‡çŒ® æ„å»ºä½ è‡ªå·±çš„ React (pomb.us) React æŠ€æœ¯æ­ç§˜ (gitee.io) React18 æ­£å¼ç‰ˆæºç çº§å‰–æ - æ˜é‡‘ (juejin.cn) æ¨èå…ˆçœ‹ React å®˜ç½‘çš„ï¼šReact å“²å­¦ â€“ React ä¸­æ–‡æ–‡æ¡£ (docschina.org)\n","wordCount":"260","inLanguage":"en","image":"https://joeyma-zh.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2025-02-12T14:03:41+08:00","dateModified":"2025-02-12T14:03:41+08:00","author":{"@type":"Person","name":"Joey"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://joeyma-zh.github.io/posts/touch-react/"},"publisher":{"@type":"Organization","name":"Joey Blog","logo":{"@type":"ImageObject","url":"https://joeyma-zh.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://joeyma-zh.github.io/ accesskey=h title="Joey Blog (Alt + H)">Joey Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://joeyma-zh.github.io/archives/ title="ğŸ“… Archives"><span>ğŸ“… Archives</span></a></li><li><a href=https://joeyma-zh.github.io/tags/ title="ğŸ”– Tags"><span>ğŸ”– Tags</span></a></li><li><a href=https://joeyma-zh.github.io/search/ title="ğŸ” Search (Alt + /)" accesskey=/><span>ğŸ” Search</span></a></li><li><a href=https://joeyma-zh.github.io/about/ title="ğŸ“„ About"><span>ğŸ“„ About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://joeyma-zh.github.io/>Home</a>&nbsp;Â»&nbsp;<a href=https://joeyma-zh.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Touch React</h1><div class=post-meta><span title='2025-02-12 14:03:41 +0800 CST'>February 12, 2025</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;260 words&nbsp;Â·&nbsp;Joey&nbsp;|&nbsp;<a href=https://github.com/JoeyMa-zh/MyBlog/edit/main/content/posts/Touch-React.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#createlement>creatElement</a><ul><li><a href=#createelement-è§£æçš„å†…å®¹ä»ä½•è€Œæ¥>createElement è§£æçš„å†…å®¹ä»ä½•è€Œæ¥ï¼Ÿ</a></li></ul></li><li><a href=#render>render</a><ul><li><a href=#concurrent-modeå¹¶å‘æ¨¡å¼>Concurrent Modeï¼ˆå¹¶å‘æ¨¡å¼ï¼‰</a></li></ul></li><li><a href=#å‚è€ƒæ–‡çŒ®>å‚è€ƒæ–‡çŒ®</a></li></ul></nav></div></details></div><div class=post-content><blockquote><p>æ–‡ç« åŸºäº React 18.3 ç‰ˆæœ¬</p></blockquote><h2 id=createlement>creatElement<a hidden class=anchor aria-hidden=true href=#createlement>#</a></h2><p>è€³ç†Ÿèƒ½è¯¦ çš„ JSXï¼Œå®ƒæ˜¯å¦‚ä½•å˜æˆæˆ‘ä»¬ç†Ÿæ‚‰çš„ DOM çš„ï¼Ÿè¿™å½’åŠŸäº React çš„<a href=https://zh-hans.react.dev/reference/react/createElement#createelement>creatElement</a>ï¼Œå­¦è¿‡ Vue çš„éƒ½çŸ¥é“ï¼Œå®ƒä»¬è¿åå­—éƒ½ä¸€æ ·ï¼Œè¿™ä¸ªå‡½æ•°ä¸»è¦çš„ä½œç”¨éƒ½æ˜¯è¿‘ä¹ç›¸åŒå…è®¸ä½ åœ¨<code>HTML</code>ä¸­ç¼–å†™ JavaScriptï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ React æ˜¯é™æ€çš„ domï¼ŒVue æ˜¯åŠ¨æ€çš„ domï¼Œä»ç¼–å†™çš„å½¢å¼å’Œè¯­æ³•ä¸Šå¯ä»¥çœ‹å‡ºï¼ŒReact æ›´åå‘äºæ‰‹åŠ¨æŒ¡ï¼ŒVue åˆ™æ˜¯è‡ªåŠ¨æŒ¡ã€‚å›åˆ°æ­£é¢˜ï¼ŒReact çš„ createElement æ›´åå‘äº JavaScript çš„ç¼–å†™ï¼Œå› ä¸º children å°±åœ¨ prop é‡Œé¢ï¼Œè€Œ Vue æ˜¯åŠ äº†ä¸€å±‚æ’æ§½ã€‚React ä¸­ createElement é‡è¦å‚æ•°å°±æ˜¯<code>type</code>å’Œ<code>prop</code>ï¼Œæ¥è§¦è¿‡ Vue çš„å°±å¾ˆç†Ÿæ‚‰ï¼Œå…¶å®å°±æ˜¯æ—¥å¸¸ Vue æ¨¡ç‰ˆä½¿ç”¨çš„æ ‡ç­¾å’Œ propsï¼Œæ‰€ä»¥ React çš„ createElement çœ‹èµ·æ¥åƒï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>element</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span>
</span></span><span class=line><span class=cl> <span class=nx>type</span><span class=o>:</span><span class=s2>&#34;h1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=nx>prop</span><span class=o>:</span><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>title</span><span class=o>:</span> <span class=s2>&#34;foo&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>children</span><span class=o>:</span> <span class=s2>&#34;Hello&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></div><p>æ¥ç€é€šè¿‡ React å®ƒä¼šå˜æˆè¿™æ ·çš„ DOMï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>h1</span> <span class=na>title</span><span class=o>=</span><span class=s>&#34;foo&#34;</span><span class=p>&gt;</span>Hello<span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>createElement ç”Ÿæˆä¹‹åè¿”å›ï¼šè¿”å›çš„ç»“æ„ä½“å«åš<strong>React å…ƒç´ å¯¹è±¡</strong>ï¼Œå®ƒç”¨äºæè¿° UI ç»“æ„ï¼Œè¿™ä¸ªäº§ç‰©æœ€ç»ˆä¼šå˜æˆä¸€ä¸ª<code>filber</code>ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;div&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>props</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>className</span><span class=o>:</span> <span class=s1>&#39;container&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>children</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;h1&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>props</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>children</span><span class=o>:</span> <span class=s1>&#39;Hello, World!&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;p&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>props</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>children</span><span class=o>:</span> <span class=s1>&#39;This is a paragraph.&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=createelement-è§£æçš„å†…å®¹ä»ä½•è€Œæ¥>createElement è§£æçš„å†…å®¹ä»ä½•è€Œæ¥ï¼Ÿ<a hidden class=anchor aria-hidden=true href=#createelement-è§£æçš„å†…å®¹ä»ä½•è€Œæ¥>#</a></h3><p>è¿™é‡Œæ¶‰åŠåˆ°éå¸¸å¤æ‚çš„å†…å®¹ï¼š<strong>Babel çš„ç¼–è¯‘</strong>ï¼Œbabel ä¼šå¸®åŠ©ä½ æŠŠ JSX æ–‡ä»¶ç¼–è¯‘æˆä¸ºå¯ä¾›è§£æçš„ JavaScript ä»£ç ï¼ŒJSX å…¶å®æ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œå®ƒå…è®¸åœ¨ JavaScript ç¯å¢ƒä¸­ä½¿ç”¨ç¼–å†™ HTML ç»“æ„çš„æ–‡ä»¶ã€‚</p><p>å®é™…ä¸Šï¼Œjsxæ˜¯é€šè¿‡babelæ’ä»¶<a href=https://babeljs.io/docs/babel-plugin-transform-react-jsx>@babel/plugin-transform-react-jsx</a>è¿›è¡Œç¼–è¯‘çš„</p><h2 id=render>render<a hidden class=anchor aria-hidden=true href=#render>#</a></h2><p>é€šè¿‡<code>creatElement</code></p><p>åœ¨ React å†…éƒ¨ï¼Œå®é™…ä¸Šæ˜¯è¿™æ ·çš„ä¼ªä»£ç :æ‰¾åˆ°æ ¹å®¹å™¨ï¼Œå¹¶æ ¹æ® dom ç±»å‹åˆ›å»ºå®¹å™¨ï¼Œç„¶åèµ‹å€¼ä¸Š propsï¼Œä¹‹åå°±æ˜¯å¤„ç† children èŠ‚ç‚¹ï¼Œå¦‚æœ children æ˜¯æ–‡æœ¬ï¼Œé‚£ç›´æ¥åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹ï¼Œå¦‚æœå­å…ƒç´ æ˜¯æ•°ç»„ï¼Œé€’å½’å¤„ç†æ¯ä¸ªå­å…ƒç´ ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>function</span> <span class=nx>render</span><span class=p>(</span><span class=nx>element</span><span class=p>,</span> <span class=nx>container</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// åˆ›å»º DOM å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>node</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=nx>element</span><span class=p>.</span><span class=nx>type</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// è®¾ç½®å±æ€§
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>for</span> <span class=p>(</span><span class=kd>let</span> <span class=nx>propName</span> <span class=k>in</span> <span class=nx>element</span><span class=p>.</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>propName</span> <span class=o>!==</span> <span class=s2>&#34;children&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>node</span><span class=p>[</span><span class=nx>propName</span><span class=p>]</span> <span class=o>=</span> <span class=nx>element</span><span class=p>.</span><span class=nx>props</span><span class=p>[</span><span class=nx>propName</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// å¤„ç†å­å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>children</span> <span class=o>=</span> <span class=nx>element</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>children</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=k>typeof</span> <span class=nx>children</span> <span class=o>===</span> <span class=s2>&#34;string&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å¦‚æœå­å…ƒç´ æ˜¯æ–‡æœ¬ï¼Œç›´æ¥åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>textNode</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>createTextNode</span><span class=p>(</span><span class=nx>children</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>node</span><span class=p>.</span><span class=nx>appendChild</span><span class=p>(</span><span class=nx>textNode</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=nb>Array</span><span class=p>.</span><span class=nx>isArray</span><span class=p>(</span><span class=nx>children</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å¦‚æœå­å…ƒç´ æ˜¯æ•°ç»„ï¼Œé€’å½’å¤„ç†æ¯ä¸ªå­å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>children</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>child</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>render</span><span class=p>(</span><span class=nx>child</span><span class=p>,</span> <span class=nx>node</span><span class=p>));</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// æŒ‚è½½åˆ°å®¹å™¨
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>container</span><span class=p>.</span><span class=nx>appendChild</span><span class=p>(</span><span class=nx>node</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ä½¿ç”¨ç¤ºä¾‹
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>element</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;div&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>props</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>className</span><span class=o>:</span> <span class=s2>&#34;container&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>children</span><span class=o>:</span> <span class=s2>&#34;Hello, World!&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>container</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;root&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>render</span><span class=p>(</span><span class=nx>element</span><span class=p>,</span> <span class=nx>container</span><span class=p>);</span>
</span></span></code></pre></div><h3 id=concurrent-modeå¹¶å‘æ¨¡å¼>Concurrent Modeï¼ˆå¹¶å‘æ¨¡å¼ï¼‰<a hidden class=anchor aria-hidden=true href=#concurrent-modeå¹¶å‘æ¨¡å¼>#</a></h3><p>åœ¨æµè§ˆå™¨åˆšå¼€å§‹æ¸²æŸ“çš„æ—¶å€™ï¼Œä¼šé˜»å¡ä¸»çº¿ç¨‹ç›´åˆ°å…ƒç´ æ ‘æ¸²æŸ“å®Œæˆï¼Œé€šå¸¸å¦‚æœå…ƒç´ æ ‘æ¯”è¾ƒå¤§ä¼šå ç”¨å¤§é‡çš„æ—¶é—´ï¼Œå¯¼è‡´éƒ¨åˆ†ä¼˜å…ˆçº§æ“ä½œï¼ˆç”¨æˆ·è¾“å…¥ ã€åŠ¨ç”»ï¼‰ç­‰é«˜çº§è°ƒåº¦ä¼šè¢«é˜»å¡ï¼Œæ‰€ä»¥ React å›¢é˜Ÿä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°†æ¯ä¸ªå°ä»»åŠ¡åˆ†ä¸ºå•å…ƒï¼Œå½“æµè§ˆå™¨çš„æ—¶å€™éœ€è¦æ‰§è¡Œç”¨æˆ·è¾“å…¥æ—¶ï¼Œä¼šä¸­æ–­æ¸²æŸ“è¿›åœºï¼Œç­‰è°ƒåº¦å®Œæˆå„å•å…ƒç»§ç»­å·¥ä½œã€‚æˆ‘ä»¬ä½¿ç”¨<a href=https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestIdleCallback>requestIdleCallback</a>æ„å»ºä¸€ä¸ªé€’å½’ï¼Œå½“æµè§ˆå™¨æœ‰ç©ºé—²æ—¶æ‰§è¡Œå›è°ƒå‡½æ•°(ç†è§£å¦‚åŒ setTimeout);</p><h4 id=performunitofwork>performUnitOfWork<a hidden class=anchor aria-hidden=true href=#performunitofwork>#</a></h4><p>å¤„ç†æ¯ä¸ª Fiber èŠ‚ç‚¹çš„æ“ä½œï¼Œå¤„ç†å®Œæˆåè¿”å›ä¸‹ä¸€ä¸ªè¦å¤„ç†çš„å·¥ä½œå•å…ƒ</p><blockquote><p>è¿™é‡Œçš„ Fiber èŠ‚ç‚¹æ˜¯ React å®ç°è™šæ‹Ÿ DOM èŠ‚ç‚¹çš„å½¢å¼</p></blockquote><p>ç”± Filber èŠ‚ç‚¹æ„å»ºçš„æ ‘ç§°ä¸º Filber æ ‘ã€‚</p><h2 id=å‚è€ƒæ–‡çŒ®>å‚è€ƒæ–‡çŒ®<a hidden class=anchor aria-hidden=true href=#å‚è€ƒæ–‡çŒ®>#</a></h2><ul><li><a href=https://pomb.us/build-your-own-react/>æ„å»ºä½ è‡ªå·±çš„ React (pomb.us)</a></li><li><a href=https://kasong.gitee.io/just-react/>React æŠ€æœ¯æ­ç§˜ (gitee.io)</a></li><li><a href="https://juejin.cn/post/7080854114141208612?searchId=20240218111900F11391B3D9E87E26FA0E#heading-0">React18 æ­£å¼ç‰ˆæºç çº§å‰–æ - æ˜é‡‘ (juejin.cn)</a></li></ul><p>æ¨èå…ˆçœ‹ React å®˜ç½‘çš„ï¼š<a href=https://react.docschina.org/learn/thinking-in-react>React å“²å­¦ â€“ React ä¸­æ–‡æ–‡æ¡£ (docschina.org)</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://joeyma-zh.github.io/tags/react/>React</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://joeyma-zh.github.io/>Joey Blog</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>